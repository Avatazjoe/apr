{% extends "appointments/home.html" %}
{% load i18n %}
{% block title %}{{object}} {% trans "Calendar" %}{% endblock %}
{% block calendar_title %}{{object}} {% trans "Calendar" %}{% endblock %}

{% block event_feed_js %}
<script type="text/javascript">
    $(document).ready(function() {	
		$('#calendar').fullCalendar({
			header: {
				left: 'prev,next,today',
				center: 'title',
				right: 'month,agendaWeek,resourceDay'
			},
			defaultDate: '{% now "c" %}',
			editable: false,
			eventLimit: true, // allow "more" link when too many events
			resources: [
				{% for venue in venues %}
					{
						'id': '{{venue.id}}',
						'name': '{{venue.name}}'
					},
				{% endfor %}
			],
			events: "{% url 'appointments:doctor_event_feed' pk=object.pk %}",
			slotEventOverlap: false,
			dayClick: function(date, allDay, jsEvent, view) {
				$('#calendar').fullCalendar('changeView', 'resourceDay');
				$('#calendar').fullCalendar('gotoDate', date);
			},
			defaultView: "resourceDay",
			height: "auto",
			minTime: "06:00",
			maxTime: "19:00",
			eventClick: function(calEvent, jsEvent, view) {
				window.location.href = "/appointments/view/" + calEvent.id;
			}
		});		
	});
</script>
{% endblock %}